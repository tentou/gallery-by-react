{"version":3,"sources":["Main.js"],"names":[],"mappings":";;;;;;;;;AAGA;;;;AACA;;;;;;;;;;;;AAJA,QAAQ,6BAAR;AACA,QAAQ,gBAAR;;AAKA,IAAI,aAAa,QAAQ,wBAAR,CAAjB;;AAEA;AACA,IAAI,iBAAiB,SAAjB,cAAiB,CAAC,GAAD,EAAM,IAAN;AAAA,SAAe,KAAK,KAAL,CAAW,KAAK,MAAL,MAAiB,OAAO,GAAxB,IAA+B,GAA1C,CAAf;AAAA,CAArB,C,CAAsF;;AAEtF,aAAc,UAAU,SAAV,EAAqB;AACjC,OAAK,IAAI,IAAI,UAAU,MAAvB,EAA+B,GAA/B,GAAqC;AACnC,QAAI,YAAY,UAAU,CAAV,CAAhB;AACA,cAAU,QAAV,GAAqB,QAAQ,eAAe,UAAU,QAAjC,CAArB,CAFmC,CAEgC;AACnE,cAAU,CAAV,IAAe,SAAf,CAHmC,CAGP;AAC7B;AACD,SAAO,SAAP;AACD,CAPY,CAOV,UAPU,CAAb;;IASM,S;;;;;;;;;;;6BAEK;AACP;AACA,UAAI,WAAW,EAAf;AACA;AACA,UAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,GAAtB,EAA2B;AACzB,mBAAW,KAAK,KAAL,CAAW,OAAX,CAAmB,GAA9B;AACD;;AAED,aACE;AAAA;AAAA,UAAQ,WAAU,YAAlB,EAA+B,OAAO,QAAtC;AAAA;AACE,+CAAK,KAAK,KAAK,KAAL,CAAW,IAAX,CAAgB,QAA1B;AACK,eAAK,KAAK,KAAL,CAAW,IAAX,CAAgB,KAD1B,GADF;AAGE;AAAA;AAAA;AACE;AAAA;AAAA,cAAI,WAAU,WAAd;AAA2B,iBAAK,KAAL,CAAW,IAAX,CAAgB;AAA3C;AADF;AAHF,OADF;AAUD;;;;EApBqB,gBAAM,S;;AAuB9B;;;IACM,Y;;;AACJ;AACA,wBAAY,KAAZ,EAAmB;AAAA;;AACD;AADC,6HACX,KADW;;AAEjB,WAAK,QAAL,GAAgB;AACd,iBAAW;AACT,cAAM,CADG;AAET,eAAO;AAFE,OADG;AAKd;AACA,iBAAW;AACT,kBAAU,CAAC,CAAD,EAAI,CAAJ,CADD;AAET,mBAAW,CAAC,CAAD,EAAI,CAAJ,CAFF;AAGT,WAAG,CAAC,CAAD,EAAI,CAAJ;AAHM,OANG;AAWd;AACA,iBAAW;AACT,WAAG,CAAC,CAAD,EAAI,CAAJ,CADM;AAET,cAAM,CAAC,CAAD,EAAI,CAAJ;AAFG;AAZG,KAAhB;;AAkBA;AACA,WAAK,KAAL,GAAa;AACX,sBAAe;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AARa;AADJ,KAAb;AArBiB;AAiClB;;AAGD;;;;;wCACmB;;AAEjB;AACA,UAAI,WAAW,mBAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,KAA/B,CAAf;AAAA,UACE,SAAS,SAAS,WADpB;AAAA,UAEE,SAAS,SAAS,YAFpB;AAAA,UAGE,aAAa,KAAK,KAAL,CAAW,SAAS,CAApB,CAHf;AAAA,UAIE,aAAa,KAAK,KAAL,CAAW,SAAS,CAApB,CAJf;;AAMA;AACA,UAAI,eAAe,mBAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,UAA/B,CAAnB;AAAA,UACI,OAAO,aAAa,WADxB;AAAA,UAEI,OAAO,aAAa,YAFxB;AAAA,UAGI,WAAW,KAAK,KAAL,CAAW,OAAO,CAAlB,CAHf;AAAA,UAII,WAAW,KAAK,KAAL,CAAW,OAAO,CAAlB,CAJf;;AAMA;AACA,WAAK,QAAL,CAAc,SAAd,GAA0B;AACxB,cAAM,aAAa,QADK;AAExB,aAAK,aAAa;AAFM,OAA1B;AAIA;AACA,WAAK,QAAL,CAAc,SAAd,CAAwB,QAAxB,CAAiC,CAAjC,IAAsC,CAAC,QAAvC;AACA,WAAK,QAAL,CAAc,SAAd,CAAwB,QAAxB,CAAiC,CAAjC,IAAsC,aAAa,WAAW,CAA9D;;AAEA,WAAK,QAAL,CAAc,SAAd,CAAwB,SAAxB,CAAkC,CAAlC,IAAuC,aAAa,QAApD;AACA,WAAK,QAAL,CAAc,SAAd,CAAwB,SAAxB,CAAkC,CAAlC,IAAuC,SAAS,QAAhD;;AAEA,WAAK,QAAL,CAAc,SAAd,CAAwB,CAAxB,CAA0B,CAA1B,IAA+B,CAAC,QAAhC;AACA,WAAK,QAAL,CAAc,SAAd,CAAwB,CAAxB,CAA0B,CAA1B,IAA+B,SAAS,QAAxC;;AAEA;AACA,WAAK,QAAL,CAAc,SAAd,CAAwB,IAAxB,CAA6B,CAA7B,IAAkC,CAAC,QAAnC;AACA,WAAK,QAAL,CAAc,SAAd,CAAwB,IAAxB,CAA6B,CAA7B,IAAkC,aAAa,WAAW,CAA1D;;AAEA,WAAK,QAAL,CAAc,SAAd,CAAwB,CAAxB,CAA0B,CAA1B,IAA+B,WAAW,IAA1C;AACA,WAAK,QAAL,CAAc,SAAd,CAAwB,CAAxB,CAA0B,CAA1B,IAA+B,QAA/B;;AAEA,WAAK,SAAL,CAAe,CAAf,EAtCiB,CAsCO;AACxB;AACA;AACA;AACA;AACD;;;8BAES,W,EAAY;AACpB;;AAEA;AACA,UAAI,iBAAiB,KAAK,KAAL,CAAW,cAAhC;AAAA,UACE,WAAW,KAAK,QADlB;AAAA,UAEE,YAAY,SAAS,SAFvB;AAAA,UAGE,YAAY,SAAS,SAHvB;AAAA,UAIE,YAAY,SAAS,SAJvB;AAAA,UAKE,oBAAoB,UAAU,QALhC;AAAA,UAME,qBAAqB,UAAU,SANjC;AAAA,UAOE,aAAa,UAAU,CAPzB;AAAA,UAQE,gBAAgB,UAAU,IAR5B;AAAA,UASE,aAAa,UAAU,CATzB;AAAA,UAUE,oBAAoB,EAVtB;AAAA,UAUgC;AAC9B,kBAAY,KAAK,KAAL,CAAW,KAAK,MAAL,KAAgB,CAA3B,CAXd;AAAA,UAW8C;AAC5C,0BAAoB,CAZtB;AAAA,UAY0C;AACxC,6BAAwB,eAAe,MAAf,CAAsB,WAAtB,EAAmC,CAAnC,CAb1B,CAJoB,CAiBgD;;AAEpE;AACA,2BAAqB,CAArB,IAA0B;AACxB,aAAK;AADmB,OAA1B;;AAIA;AACA,0BAAoB,KAAK,KAAL,CAAW,KAAK,MAAL,MAAiB,eAAe,MAAf,GAAwB,SAAzC,CAAX,CAApB;AACA,0BAAoB,eAAe,MAAf,CAAsB,iBAAtB,EAAyC,SAAzC,CAApB;;AAEE;AACF,wBAAkB,OAAlB,CAA0B,UAAS,KAAT,EAAgB,KAAhB,EAAuB;AAAS;AACxD,0BAAkB,KAAlB,IAA2B;AACzB,eAAK;AACH,iBAAK,eAAe,cAAc,CAAd,CAAf,EAAiC,cAAc,CAAd,CAAjC,CADF,EAC2D;AAC9D,kBAAM,eAAe,WAAW,CAAX,CAAf,EAA8B,WAAW,CAAX,CAA9B;AAFH;AADoB,SAA3B;AAMD,OAPD;;AASA;AACA,WAAI,IAAI,IAAI,CAAR,EAAW,IAAI,eAAe,MAA9B,EAAsC,IAAI,IAAI,CAAlD,EAAqD,IAAI,CAAzD,EAA4D,GAA5D,EAAkE;AAAK;AACrE,YAAI,gBAAgB,IAApB;AACA;AACA,YAAG,IAAI,CAAP,EAAU;AACR,0BAAgB,iBAAhB,CADQ,CAC8B;AACvC,SAFD,MAEO;AACL,0BAAgB,kBAAhB,CADK,CACiC;AACvC;;AAED,uBAAe,CAAf,IAAoB;AAClB,eAAK;AACH,iBAAK,eAAe,WAAW,CAAX,CAAf,EAA8B,WAAW,CAAX,CAA9B,CADF;AAEH,kBAAM,eAAe,cAAc,CAAd,CAAf,EAAiC,cAAc,CAAd,CAAjC;AAFH;AADa,SAApB;AAMD;;AAED;AACA,UAAG,qBAAqB,kBAAkB,CAAlB,CAAxB,EAA8C;AAAM;;AAElD;AACA,uBAAe,MAAf,CAAsB,iBAAtB,EAAyC,CAAzC,EAA4C,kBAAkB,CAAlB,CAA5C;AACD;;AAED;AACA,qBAAe,MAAf,CAAsB,WAAtB,EAAmC,CAAnC,EAAsC,qBAAqB,CAArB,CAAtC;;AAEA;AACA,WAAK,QAAL,CAAc;AACZ,wBAAgB;AADJ,OAAd;AAID;;;6BACQ;AACP,UAAI,kBAAkB,EAAtB;AAAA,UACE,aAAa,EADf,CADO,CAEa;AACpB,iBAAW,OAAX,CAAmB,UAAU,KAAV,EAAiB,CAAjB,EAAoB;AACrC,YAAG,CAAC,KAAK,KAAL,CAAW,cAAX,CAA0B,CAA1B,CAAJ,EAAiC;AAAK;AACpC,eAAK,KAAL,CAAW,cAAX,CAA0B,CAA1B,IAA+B;AAC7B,iBAAK;AACH,oBAAM,CADH;AAEH,mBAAK;AAFF;AADwB,WAA/B;AAMD;AACD,mBAAW,IAAX,CAAgB,8BAAC,SAAD,IAAW,KAAK,CAAhB,EAAmB,MAAM,KAAzB,EAAgC,KAAK,cAAY,CAAjD,EAAoD,SAAS,KAAK,KAAL,CAAW,cAAX,CAA0B,CAA1B,CAA7D,GAAhB,EATqC,CAS4E;AACjH;AACD,OAXkB,CAWjB,IAXiB,CAWZ,IAXY,CAAnB;;AAaA,aACE;AAAA;AAAA,UAAS,WAAU,OAAnB,EAA2B,KAAI,OAA/B;AACE;AAAA;AAAA,YAAS,WAAU,SAAnB;AACG;AADH,SADF;AAIE,+CAAK,WAAU,gBAAf;AAJF,OADF;AAUD;;;;EAtLwB,gBAAM,S;;AAyLjC,aAAa,YAAb,GAA4B,EAA5B;;QAEQ,Y,GAAA,Y","file":"Main-compiled.js","sourcesContent":["require('normalize.css/normalize.css');\nrequire('styles/App.css');\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nvar imageDatas = require('../data/imageData.json');\n\n//取区间值方法\nvar getRangeRandom = (low, high) => Math.floor(Math.random() * (high - low) + low);   //这个以后可以通用\n\nimageDatas = (function (imagesNum) {\n  for (var i = imagesNum.length; i--;) {\n    var imageInfo = imagesNum[i];\n    imageInfo.imageUrl = require('../images/' + imageInfo.fileName);   //给当前对象赋值添加imageName属性\n    imagesNum[i] = imageInfo;   //重新定义json数据的对象，分别给加了一个imageUrl属性\n  }\n  return imagesNum;\n})(imageDatas);\n\nclass ImgFigure extends React.Component {\n\n  render() {\n    //初始化最开始的位置\n    var styleObj = {};\n    //如果props属性中制定了这张图片的位置,则使用\n    if(this.props.arrange.pos) {\n      styleObj = this.props.arrange.pos;\n    }\n\n    return (\n      <figure className=\"img-figure\" style={styleObj}>   {/*这个style可以直接是一个对象*/}\n        <img src={this.props.data.imageUrl}\n             alt={this.props.data.title}/>\n        <figcaption>\n          <h2 className=\"img-title\">{this.props.data.title}\n          </h2>\n        </figcaption>\n      </figure>\n    )\n  }\n}\n\n//大管家-操作都在这里\nclass AppComponent extends React.Component {\n  //设置模型\n  constructor(props) {\n    super(props);   //引用超类的constructor属性，因为这个是扩展，所以必须要写上这个\n    this.Constant = {\n      centerPos: {\n        left: 0,\n        right: 0\n      },\n      //水平方向的取值范围\n      hPosRange: {\n        leftSecX: [0, 0],\n        rightSecX: [0, 0],\n        y: [0, 0]\n      },\n      //垂直方向的取值范围\n      vPosRange: {\n        x: [0, 0],\n        topY: [0, 0]\n      }\n    };\n\n    //初始化state 代替以前的getInitialState\n    this.state = {\n      imgsArrangeArr:[\n\n        //形如下边这样\n        //   {\n        //   pos:{\n        //     left:'0',\n        //     top:'0'\n        //   }\n        // }\n      ]\n    }\n  }\n\n\n  // 页面加载后计算好位置\n  componentDidMount(){\n\n    // 首先拿到舞台大小\n    var stageDom = ReactDOM.findDOMNode(this.refs.stage),\n      stageW = stageDom.scrollWidth,\n      stageH = stageDom.scrollHeight,\n      halfStageW = Math.floor(stageW / 2),\n      halfStageH = Math.floor(stageH / 2);\n\n    // 拿到每张图的大小\n    var imgFigureDOM = ReactDOM.findDOMNode(this.refs.imgFigure0),\n        imgW = imgFigureDOM.scrollWidth,\n        imgH = imgFigureDOM.scrollHeight,\n        halfImgW = Math.floor(imgW / 2),\n        halfImgH = Math.floor(imgH / 2);\n\n    // 页面加载后 中间图片 的位置\n    this.Constant.centerPos = {\n      left: halfStageW - halfImgW,\n      top: halfStageH - halfImgH\n    };\n    //计算左侧右侧图片区域排布位置的取值范围--极限值\n    this.Constant.hPosRange.leftSecX[0] = -halfImgW;\n    this.Constant.hPosRange.leftSecX[1] = halfStageW - halfImgW * 3;\n\n    this.Constant.hPosRange.rightSecX[0] = halfStageW + halfImgW;\n    this.Constant.hPosRange.rightSecX[1] = stageW - halfImgW;\n\n    this.Constant.hPosRange.y[0] = -halfImgH;\n    this.Constant.hPosRange.y[1] = stageH - halfImgH;\n\n    //计算垂直排布位置的取值范围--极限值\n    this.Constant.vPosRange.topY[0] = -halfImgH;\n    this.Constant.vPosRange.topY[1] = halfStageH - halfImgH * 3;\n\n    this.Constant.vPosRange.x[0] = halfImgW - imgW;\n    this.Constant.vPosRange.x[1] = halfImgW;\n\n    this.rearrange(0);      //全部绑定到this上\n    //上边的都是极限值\n    // let num = Math.floor(Math.random() * 10);\n    // // this.rearrange(num);\n    // this.rearrange(num);\n  }\n\n  rearrange(centerIndex){\n    //重新排布图片\n\n    //先取到图片坐标数组\n    var imgsArrangeArr = this.state.imgsArrangeArr,\n      Constant = this.Constant,\n      centerPos = Constant.centerPos,\n      hPosRange = Constant.hPosRange,\n      vPosRange = Constant.vPosRange,\n      hPosRangeLeftSecX = hPosRange.leftSecX,\n      hPosRangeRightSecX = hPosRange.rightSecX,\n      hPosRangeY = hPosRange.y,\n      vPosRangeTopY = vPosRange.topY,\n      vPosRangeX = vPosRange.x,\n      imgsArrangeTopArr = [],       //存储上部图片信息\n      topImgNum = Math.floor(Math.random() * 2),  //取0个或者1个随机\n      topImgSpliceIndex = 0,                  //给上边图像做一个标记，看是从数组的哪个位置取出来的\n      imgsArrangeCenterArr  = imgsArrangeArr.splice(centerIndex, 1);    //取出那个居中的值的数据，返回被提取出来的这个中心图片的信息\n\n    //首先居中 centerIndex 的图片\n    imgsArrangeCenterArr[0] = {\n      pos: centerPos\n    }\n\n    //取出要布局上侧的图片的状态信息\n    topImgSpliceIndex = Math.floor(Math.random() * (imgsArrangeArr.length - topImgNum));\n    imgsArrangeTopArr = imgsArrangeArr.splice(topImgSpliceIndex, topImgNum);\n\n      //布局位于上侧的图片\n    imgsArrangeTopArr.forEach(function(value, index) {        //遍历上边取出的几张图片--分别给他们设置坐标\n      imgsArrangeTopArr[index] = {\n        pos: {\n          top: getRangeRandom(vPosRangeTopY[0], vPosRangeTopY[1]),      //getRangeRandom这个在上边我们定义一个方法，来随机去除一个值的方法\n          left: getRangeRandom(vPosRangeX[0], vPosRangeX[1])\n        }\n      };\n    });\n\n    //布局左右两侧的图片\n    for(var i = 0, j = imgsArrangeArr.length, k = j / 2; i < j; i ++) {    //主要为了分两半，小于i<k的是左侧 i>k的是右侧\n      let hPosRangeLORX = null;\n      //前半部分布局左边,右半部分布局右边\n      if(i < k) {\n        hPosRangeLORX = hPosRangeLeftSecX;    //这是一个x区间数组\n      } else {\n        hPosRangeLORX = hPosRangeRightSecX;   //这是一个x区间数组\n      }\n\n      imgsArrangeArr[i] = {\n        pos: {\n          top: getRangeRandom(hPosRangeY[0], hPosRangeY[1]),\n          left: getRangeRandom(hPosRangeLORX[0], hPosRangeLORX[1])\n        }\n      }\n    }\n\n    //因为下一次点击的话 还是要从新计算，所以还要将imgsArrangeArr 恢复回去\n    if(imgsArrangeTopArr && imgsArrangeTopArr[0]) {     //假如上部取到值了\n\n      //将上边图片插回去\n      imgsArrangeArr.splice(topImgSpliceIndex, 0, imgsArrangeTopArr[0]);\n    }\n\n    //将中间图像插回去\n    imgsArrangeArr.splice(centerIndex, 0, imgsArrangeCenterArr[0]);\n\n    //触发重新渲染---★\n    this.setState({\n      imgsArrangeArr: imgsArrangeArr\n    });\n\n  }\n  render() {\n    var controllerUnits = [],\n      imgFigures = [];  //放列表的数组\n    imageDatas.forEach(function (value, i) {\n      if(!this.state.imgsArrangeArr[i]){    //如果当前土坯那没有初始位置则给他个初始位置\n        this.state.imgsArrangeArr[i] = {\n          pos: {\n            left: 0,\n            top: 0\n          }\n        }\n      }\n      imgFigures.push(<ImgFigure key={i} data={value} ref={'imgFigure'+i} arrange={this.state.imgsArrangeArr[i]} />);  // 这个arrange带有每张图片的状态信息\n      //console.log(value.imageUrl)\n    }.bind(this));\n\n    return (\n      <section className=\"stage\" ref=\"stage\">\n        <section className=\"img-sec\">\n          {imgFigures}\n        </section>\n        <nav className=\"controller-nav\">\n\n        </nav>\n      </section>\n    );\n  }\n}\n\nAppComponent.defaultProps = {};\n\nexport {AppComponent};\n"]}